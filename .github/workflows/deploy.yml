name: Deploy Static Website to Yandex Cloud Object Storage

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Upload Static Files to Yandex Object Storage
        uses: yc-actions/yc-obj-storage-upload@v3
        with:
          # --- Authentication (Single Secret JSON) ---
          # This line securely passes the ENTIRE JSON string (the new secret you created)
          yc-sa-json-credentials: ${{ secrets.YC_SA_CREDENTIALS }}
            
          # ðŸ’¡ REQUIRED: Replace 'YOUR-BUCKET-NAME' with your actual bucket name
          bucket: family-tree-ya 
          
          # ðŸ’¡ REQUIRED: Path to your static files folder (e.g., 'docs/')
          root: docs/ 

          # Clears all existing files in the bucket before uploading new ones
          clear: true