<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Family Tree</title>
    <script src="js/d3.v7.min.js"></script>
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>

    <div id="main-container">

        <!-- TREE CENTERED -->
        <div id="tree-wrapper">
            <div id="tree-container">
                <h1>Семейное древо</h1>
                <svg id="family-tree-svg" width="1200" height="800" class="box-style"></svg>
                <script src="js/family_tree.js"></script>
            </div>
        </div>

        
        <!-- HISTOGRAM FLOATS INDEPENDENTLY -->
        <!--
        <div id="stats-iframe-container">
            <iframe 
                id="names-histogram-iframe" 
                src="statistics/names.html"
                width="300"
                frameborder="0"
                class="box-style">
            </iframe>
        </div>

    </div>

    <iframe id="feedback-module-iframe" src="feedback/feedback_module.html"></iframe>
-->
    <!-- AUTO-RESIZE HISTOGRAM IFRAME -->
     <!--
    <script>
        window.addEventListener("message", function(event) {
            if (event.data?.type === "histogramHeight") {
                const iframe = document.getElementById("names-histogram-iframe");
                iframe.style.height = event.data.height + "px";
            }
        });

        // Float histogram only when space allows
        function adjustHistogramPosition() {
            const container = document.getElementById("stats-iframe-container");
            const histogramWidth = 300;
            if (window.innerWidth < 1400) { // narrow screens
                container.classList.add("static");
            } else {
                container.classList.remove("static");
            }
        }

        window.addEventListener("load", adjustHistogramPosition);
        window.addEventListener("resize", adjustHistogramPosition);
    </script>
    -->

<!-- MAP BELOW TREE -->
 <style>
  #map-iframe-container {
      text-align: center; /* this centers inline/inline-block elements inside the container */
  }
</style>

<div id="map-iframe-container">
    <iframe 
        id="birthplaces-map-iframe" 
        src="statistics/birthplaces_map.html"
        width=600px 
        height=300px 
        frameborder="0"
        class="box-style">
    </iframe>
</div>

<script>
function resizeMapIframe() {
    const iframe = document.getElementById("birthplaces-map-iframe");
    iframe.style.height = Math.min(window.innerHeight * 0.6, 400) + "px";
}

window.addEventListener("resize", resizeMapIframe);
window.addEventListener("load", resizeMapIframe);
</script>


</body>
</html>